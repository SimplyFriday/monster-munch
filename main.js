(()=>{"use strict";var e,t={568:(e,t,i)=>{var r,n=i(325),o=i(253),c=i(761),a=i(650),s=i(966),l=i(362),u=i(518),h={Sword:new n.Texture(o),Bag:new n.Texture(c),ItemIconSheet:new n.Texture(a),PlayerSprites:new n.Texture(l),LevelLoop1:new n.Sound(u),BalloonIconSheet:new n.Texture(s)},p=function(){function e(){}return Object.defineProperty(e,"Heart",{get:function(){return this.iconSheet.getSprite(1)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"Skull",{get:function(){return this.iconSheet.getSprite(6)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"MoneyBag",{get:function(){return this.iconSheet.getSprite(9)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"RedGem",{get:function(){return this.iconSheet.getSprite(25)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"BlueGem",{get:function(){return this.iconSheet.getSprite(26)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"YellowGem",{get:function(){return this.iconSheet.getSprite(27)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"PurpleGem",{get:function(){return this.iconSheet.getSprite(28)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"GreenGem",{get:function(){return this.iconSheet.getSprite(29)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"WhiteGem",{get:function(){return this.iconSheet.getSprite(30)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"BlackGem",{get:function(){return this.iconSheet.getSprite(31)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"GreenLeaf",{get:function(){return this.iconSheet.getSprite(32)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"RedLeaf",{get:function(){return this.iconSheet.getSprite(33)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"RedPot",{get:function(){return this.iconSheet.getSprite(34)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"BluePot",{get:function(){return this.iconSheet.getSprite(35)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"YellowPot",{get:function(){return this.iconSheet.getSprite(36)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"GreenPot",{get:function(){return this.iconSheet.getSprite(37)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"Posion",{get:function(){return this.iconSheet.getSprite(39)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"Apple",{get:function(){return this.iconSheet.getSprite(40)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"Banana",{get:function(){return this.iconSheet.getSprite(42)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"Bread",{get:function(){return this.iconSheet.getSprite(44)},enumerable:!1,configurable:!0}),e.iconSheet=new n.SpriteSheet({image:h.ItemIconSheet,rows:11,columns:16,spWidth:12,spHeight:12}),e}(),f=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isHeld=!1,t}return f(t,e),t}(n.Actor),d=function(){function e(){}return e.createWallTile=function(e,t,i,r){this.createTile(e,t,i,r,!0,1)},e.createBackgroundTile=function(e,t,i,r){this.createTile(e,t,i,r,!1,-1)},e.createTile=function(e,t,i,r,o,c){var a=new n.Actor({scene:e,width:this.tileWidth,height:this.tileHeight,color:t,pos:(0,n.vec)(i*this.tileWidth,r*this.tileHeight)});e.add(a),a.setZIndex(c),o&&(a.body.collider.type=n.CollisionType.Fixed)},e.createItemOnTile=function(e,t,i,r){var o=new g({scene:e,width:this.tileWidth,height:this.tileHeight,pos:(0,n.vec)(i*this.tileWidth,r*this.tileHeight)});e.add(o),o.setZIndex(40);var c=this.tileWidth/t.width*.75,a=this.tileHeight/t.height*.75;return t.scale=(0,n.vec)(c,a),o.addDrawing(t),o},e.tileWidth=50,e.tileHeight=50,e}(),b=function(){function e(){}return Object.defineProperty(e,"MusicBalloon",{get:function(){return this.balloonSheet.getSprite(18)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"MusicBalloonOff",{get:function(){return this.balloonSheet.getSprite(17)},enumerable:!1,configurable:!0}),e.balloonSheet=new n.SpriteSheet({image:h.BalloonIconSheet,rows:11,columns:8,spWidth:16,spHeight:16}),e}(),y=function(){function e(){}return e.createUIIcon=function(e,t,i){var r=new n.ScreenElement({width:this.iconWidth,height:this.iconHeight,pos:(0,n.vec)(t,i)});return r.addDrawing(this.scaleSprite(e)),r},e.scaleSprite=function(e){var t;return(t=typeof e==typeof n.Texture?e.asSprite():e).scale=(0,n.vec)(3,3),t},e.createUIToggleButton=function(e,t,i,r){var o=new n.ScreenElement({width:this.iconWidth,height:this.iconHeight,pos:(0,n.vec)(i,r)});return o.addDrawing("on",this.scaleSprite(e)),o.addDrawing("off",this.scaleSprite(t)),o},e.addLevelUI=function(e){var t=this.createUIToggleButton(b.MusicBalloon,b.MusicBalloonOff,800,50);t.on("pointerup",(function(i){e.toggleMusic(),e.muteMusic?t.setDrawing("off"):t.setDrawing("on")})),e.add(t);var i=this.createUIIcon(p.Heart,900,50),r=this.createUIIcon(p.Heart,930,50),n=this.createUIIcon(p.Heart,960,50);e.add(i),e.add(r),e.add(n)},e.iconWidth=50,e.iconHeight=50,e}(),S=function(){function e(){}return e.getScaledAnimation=function(e,t,i,r,o){void 0===o&&(o=1);var c=t.getAnimationBetween(e,i,r,100),a=d.tileHeight/c.width*o,s=d.tileHeight/c.height*o;return c.scale=(0,n.vec)(a,s),c},e.getScaledSprite=function(e,t){void 0===t&&(t=1);var i=d.tileHeight/e.width*t,r=d.tileHeight/e.height*t;return e.scale=(0,n.vec)(i,r),e},e}(),w=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),m=function(e){function t(){var t=e.call(this,{pos:(0,n.vec)(150,150),width:25,height:25,color:new n.Color(100,255,100)})||this;return t.baseSpeed=200,t.spriteScale=.9,t}return w(t,e),t.prototype.onInitialize=function(e){this.body.collider.type=n.CollisionType.Active,this.body.collider.shape=n.Shape.Box(d.tileHeight*this.spriteScale,d.tileHeight*this.spriteScale),this.setZIndex(1e3);this.sprites=new n.SpriteSheet({image:h.PlayerSprites,rows:4,columns:3,spWidth:16,spHeight:21}),this.addDrawing("standDown",S.getScaledSprite(this.sprites.getSprite(1),this.spriteScale)),this.addDrawing("standLeft",S.getScaledSprite(this.sprites.getSprite(4),this.spriteScale)),this.addDrawing("standRight",S.getScaledSprite(this.sprites.getSprite(7),this.spriteScale)),this.addDrawing("standUp",S.getScaledSprite(this.sprites.getSprite(10),this.spriteScale)),this.addDrawing("walkDown",S.getScaledAnimation(e,this.sprites,0,3,this.spriteScale)),this.addDrawing("walkLeft",S.getScaledAnimation(e,this.sprites,3,6,this.spriteScale)),this.addDrawing("walkRight",S.getScaledAnimation(e,this.sprites,6,9,this.spriteScale)),this.addDrawing("walkUp",S.getScaledAnimation(e,this.sprites,9,11,this.spriteScale))},t.prototype.onPreUpdate=function(e,t){var i=0,r=0;e.input.keyboard.isHeld(n.Input.Keys.W)&&(r-=1),e.input.keyboard.isHeld(n.Input.Keys.S)&&(r+=1),e.input.keyboard.isHeld(n.Input.Keys.A)&&(i-=1),e.input.keyboard.isHeld(n.Input.Keys.D)&&(i+=1);var o=Math.sqrt(Math.abs(i)+Math.abs(r)),c=r/o*this.baseSpeed,a=i/o*this.baseSpeed;if(this.vel=o>0?(0,n.vec)(a,c):(0,n.vec)(0,0),r>0?this.facing="d":i<0?this.facing="l":i>0?this.facing="r":r<0&&(this.facing="u"),0===i&&0===r)switch(this.facing){case"l":this.setDrawing("standLeft");break;case"r":this.setDrawing("standRight");break;case"u":this.setDrawing("standUp");break;case"d":this.setDrawing("standDown")}else switch(this.facing){case"l":this.setDrawing("walkLeft");break;case"r":this.setDrawing("walkRight");break;case"u":this.setDrawing("walkUp");break;case"d":this.setDrawing("walkDown")}e.input.keyboard.wasPressed(n.Input.Keys.Space)&&(this.heldItem?this.trySetDownItem():this.tryPickupItem()),this.heldItem&&(this.heldItem.pos=(0,n.vec)(this.pos.x,this.pos.y-40))},t.prototype.trySetDownItem=function(){var e=0,t=0;switch(this.facing){case"l":e-=d.tileWidth;break;case"r":e+=d.tileWidth;break;case"u":t-=d.tileHeight;break;case"d":t+=d.tileHeight}this.heldItem.pos=(0,n.vec)(this.pos.x+e,this.pos.y+t),this.heldItem=null},t.prototype.tryPickupItem=function(){var e=this,t=0,i=0;switch(this.facing){case"l":t-=d.tileWidth/2;break;case"r":t+=d.tileWidth/2;break;case"u":i-=d.tileHeight/2;break;case"d":i+=d.tileHeight/2}var r=this.scene.actors.filter((function(r){return r instanceof g&&r.contains(e.pos.x+t,e.pos.y+i)}));r.length>0&&(this.heldItem=r[0],this.heldItem.isHeld=!0)},t}(n.Actor),v=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),O=function(e){function t(t){var i=e.call(this,t)||this;return i.grid=[],i.muteMusic=!1,i}return v(t,e),t.prototype.onInitialize=function(){y.addLevelUI(this),this.player=new m,this.add(this.player),this.camera.strategy.lockToActor(this.player),this.musicTrack=h.LevelLoop1,this.musicTrack.loop=!0,this.musicTrack.play()},t.prototype.toggleMusic=function(){this.muteMusic=!this.muteMusic,this.muteMusic?this.musicTrack.stop():this.musicTrack.play()},t}(n.Scene),T=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),k=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return T(t,e),t.prototype.onInitialize=function(){e.prototype.onInitialize.call(this);var t=new n.Color(200,200,200);d.createWallTile(this,t,1,1),d.createWallTile(this,t,1,3),d.createWallTile(this,t,2,2),d.createWallTile(this,t,2,4),t=new n.Color(150,75,0),d.createWallTile(this,t,5,5),d.createWallTile(this,t,5,6),d.createWallTile(this,t,5,7),d.createWallTile(this,t,5,8),d.createWallTile(this,t,9,5),d.createWallTile(this,t,9,6),d.createWallTile(this,t,9,7),d.createWallTile(this,t,9,8),d.createWallTile(this,t,6,8),d.createWallTile(this,t,7,8),d.createWallTile(this,t,8,8),t=new n.Color(194,178,128),d.createBackgroundTile(this,t,6,6),d.createBackgroundTile(this,t,6,7),d.createBackgroundTile(this,t,7,6),d.createBackgroundTile(this,t,7,7),d.createBackgroundTile(this,t,8,6),d.createBackgroundTile(this,t,8,7),d.createBackgroundTile(this,t,6,5),d.createBackgroundTile(this,t,7,5),d.createBackgroundTile(this,t,8,5),d.createItemOnTile(this,p.Banana,5,5),d.createItemOnTile(this,p.Skull,5,7),d.createItemOnTile(this,p.Posion,9,6),d.createItemOnTile(this,p.Bread,8,8)},t}(O),P=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),I=new(function(e){function t(){return e.call(this,{displayMode:n.DisplayMode.FullScreen})||this}return P(t,e),t.prototype.start=function(){this.levelTest=new k(this),I.add("levelTest",this.levelTest);var t=new n.Loader(Object.values(h));return t.suppressPlayButton=!1,e.prototype.start.call(this,t)},t}(n.Engine));I.start().then((function(){I.goToScene("levelTest")})),document.oncontextmenu=function(){return!1}},518:(e,t,i)=>{e.exports=i.p+"64ba563e6ad61b443cac.wav"},761:(e,t,i)=>{e.exports=i.p+"fdf6337d6ffc17459338.png"},966:(e,t,i)=>{e.exports=i.p+"ef4623bfdde5763e26d2.png"},650:(e,t,i)=>{e.exports=i.p+"bb07cf9b72794c4a7484.png"},362:(e,t,i)=>{e.exports=i.p+"5ab5c8076e8f2e660fd8.png"},253:(e,t,i)=>{e.exports=i.p+"0377c07b4b240a97b8a9.png"}},i={};function r(e){var n=i[e];if(void 0!==n)return n.exports;var o=i[e]={exports:{}};return t[e](o,o.exports,r),o.exports}r.m=t,e=[],r.O=(t,i,n,o)=>{if(!i){var c=1/0;for(u=0;u<e.length;u++){for(var[i,n,o]=e[u],a=!0,s=0;s<i.length;s++)(!1&o||c>=o)&&Object.keys(r.O).every((e=>r.O[e](i[s])))?i.splice(s--,1):(a=!1,o<c&&(c=o));if(a){e.splice(u--,1);var l=n();void 0!==l&&(t=l)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[i,n,o]},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e;r.g.importScripts&&(e=r.g.location+"");var t=r.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var i=t.getElementsByTagName("script");i.length&&(e=i[i.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),r.p=e})(),(()=>{var e={179:0};r.O.j=t=>0===e[t];var t=(t,i)=>{var n,o,[c,a,s]=i,l=0;for(n in a)r.o(a,n)&&(r.m[n]=a[n]);if(s)var u=s(r);for(t&&t(i);l<c.length;l++)o=c[l],r.o(e,o)&&e[o]&&e[o][0](),e[c[l]]=0;return r.O(u)},i=self.webpackChunkexcalibur_webpack=self.webpackChunkexcalibur_webpack||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))})();var n=r.O(void 0,[325],(()=>r(568)));n=r.O(n)})();
//# sourceMappingURL=main.js.map